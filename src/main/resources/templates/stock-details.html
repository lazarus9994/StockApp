<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<th:block th:replace="~{layout :: layout(~{this :: content}, 'stock-details', ~{this :: scripts})}">

    <!-- ========================= -->
    <!-- CONTENT -->
    <!-- ========================= -->
    <section th:fragment="content">

        <div class="page-header">
            <h1 th:text="${stock.stockCode + ' â€” ' + stock.stockName}"></h1>
            <p th:if="${stock.industry}" th:text="'Industry: ' + ${stock.industry}"></p>
        </div>

        <!-- BASIC INFO -->
        <div class="card wide">
            <h3>Stock Information</h3>

            <table class="table">
                <tr><th>Symbol:</th><td th:text="${stock.stockCode}"></td></tr>
                <tr><th>Name:</th><td th:text="${stock.stockName}"></td></tr>
                <tr><th>Industry:</th><td th:text="${stock.industry} ?: 'N/A'"></td></tr>
                <tr><th>Last Close:</th><td th:text="${stock.lastClosePrice} ?: 'N/A'"></td></tr>
                <tr><th>Market Cap:</th><td th:text="${stock.marketCap} ?: 'N/A'"></td></tr>
                <tr><th>Total Records:</th><td th:text="${recordsCount}"></td></tr>
            </table>
        </div>

        <!-- PRICE CHART -->
        <div class="card wide">
            <h3>Price Chart</h3>
            <canvas id="priceChart" th:attr="data-code=${stock.stockCode}"></canvas>
        </div>

        <!-- NEWS -->
        <div class="card wide">
            <h3>Latest News</h3>
            <p>No news available for this stock yet.</p>
        </div>

    </section>

    <!-- ========================= -->
    <!-- SCRIPTS -->
    <!-- ========================= -->
    <th:block th:fragment="scripts">

        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>

        <!-- dynamic stockCode -->
        <script th:inline="javascript">
            window.stockCode = [[${stock.stockCode}]];
        </script>

        <script src="/js/priceChart.js"></script>

    </th:block>

</th:block>

</html>
