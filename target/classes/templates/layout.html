<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en"
      th:fragment="layout(content)">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle} ?: 'StockApp'">StockApp</title>
    <link rel="stylesheet" th:href="@{/css/theme.css}">
</head>
<body th:with="path=${currentPath} ?: '/'"
      th:class="${#strings.startsWith(path,'/login') or #strings.startsWith(path,'/register') ? 'auth-page' : 'app-layout'}">


<div class="app-container">

    <!-- === Sidebar === -->
    <aside class="sidebar"
           th:if="${currentPath == null or (!#strings.startsWith(currentPath ?: '', '/login') and !#strings.startsWith(currentPath ?: '', '/register'))}">
        <div class="logo-section">
            <span class="logo">ğŸ’¹</span>
            <h2>StockApp</h2>
        </div>

        <nav class="nav-links">

            <a th:href="@{/}" class="nav-item"
               th:classappend="${currentPath != null and currentPath == '/'} ? ' active'">
                <i>ğŸ </i><span>Dashboard</span>
            </a>

            <a th:href="@{/stocks}" class="nav-item"
               th:classappend="${currentPath != null and #strings.startsWith(currentPath, '/stocks')} ? ' active'">
                <i>ğŸ“ˆ</i><span>Stocks</span>
            </a>

            <a th:href="@{/analytics}" class="nav-item"
               th:classappend="${currentPath != null and #strings.startsWith(currentPath, '/analytics')} ? ' active'">
                <i>ğŸ“Š</i><span>Analytics</span>
            </a>

            <a th:href="@{/profile}" class="nav-item"
               th:classappend="${currentPath != null and #strings.startsWith(currentPath, '/profile')} ? ' active'">
                <i>ğŸ‘¤</i><span>Profile</span>
            </a>

            <!-- Upload CSV -->
            <a th:href="@{/upload}" class="nav-item"
               th:classappend="${currentPath != null and #strings.startsWith(currentPath, '/upload')} ? ' active'">
                <i>ğŸ“¤</i><span>Upload CSV</span>
            </a>

            <!-- Import Logs -->
            <a th:href="@{/imports}" class="nav-item"
               th:classappend="${currentPath != null and #strings.startsWith(currentPath, '/imports')} ? ' active'">
                <i>ğŸ“</i><span>Import Logs</span>
            </a>

            <!-- Reports -->
            <a th:href="@{/reports}" class="nav-item"
               th:classappend="${currentPath != null and #strings.startsWith(currentPath, '/reports')} ? ' active'">
                <i>ğŸ“œ</i><span>Reports</span>
            </a>

            <!-- Logout -->
            <a th:href="@{/logout}" class="nav-item">
                <i>ğŸšª</i><span>Logout</span>
            </a>

        </nav>

    </aside>

    <!-- === Main content area === -->
    <main class="main-content">
        <th:block th:replace="${content}"></th:block>
    </main>
</div>

</body>
</html>
