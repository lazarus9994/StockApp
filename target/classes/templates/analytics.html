<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: layout(~{this :: content}, 'analytics', ~{this :: scripts})}">

<!-- ============================
      CONTENT SECTION
============================= -->
<section th:fragment="content">

    <h1>Analytics Dashboard</h1>

    <div class="analytics-controls" style="margin-bottom: 20px; display: flex; gap: 15px; align-items: center;">

        <label>Select Stock:</label>
        <select id="stockSelect">
            <option value="" disabled selected>Choose...</option>
            <option th:each="s : ${stocks}"
                    th:value="${s.stockCode}"
                    th:text="${s.stockCode}">
            </option>
        </select>

        <label>From:</label>
        <input id="fromDate" type="date">

        <label>To:</label>
        <input id="toDate" type="date">

    </div>

    <div class="grid-2">

        <!-- OSCILLATION -->
        <div class="card wide">
            <h3>Oscillation</h3>
            <canvas id="oscillationChart" th:attr="data-code=${stocks[0].stockCode}"></canvas>
        </div>

        <!-- MASS ANALYSIS -->
        <div class="card wide">
            <h3>Mass</h3>
            <canvas id="massChart" th:attr="data-code=${stocks[0].stockCode}"></canvas>
        </div>

        <!-- FREQUENCY ANALYSIS -->
        <div class="card wide">
            <h3>Frequency</h3>
            <canvas id="dailyChart" th:attr="data-code=${stocks[0].stockCode}"></canvas>
            <canvas id="weeklyChart" th:attr="data-code=${stocks[0].stockCode}"></canvas>
            <canvas id="monthlyChart" th:attr="data-code=${stocks[0].stockCode}"></canvas>
            <canvas id="yearlyChart" th:attr="data-code=${stocks[0].stockCode}"></canvas>
        </div>

        <!-- KINETICS -->
        <div class="card wide">
            <h3>Kinetics</h3>
            <canvas id="kineticsChart" th:attr="data-code=${stocks[0].stockCode}"></canvas>
        </div>

        <!-- DELTA -->
        <div class="card wide">
            <h3>Î” (Delta Movements)</h3>
            <canvas id="deltaChart" th:attr="data-code=${stocks[0].stockCode}"></canvas>
        </div>

    </div>

</section>

<!-- ============================
      SCRIPTS SECTION
============================= -->
<th:block th:fragment="scripts">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>

    <!-- Main Analytics Controller -->
    <script src="/js/analytics.js"></script>

    <!-- Individual Charts -->
    <script src="/js/oscillationChart.js"></script>
    <script src="/js/massChart.js"></script>
    <script src="/js/frequencyCharts.js"></script>
    <script src="/js/kineticsChart.js"></script>
    <script src="/js/deltaChart.js"></script>

</th:block>

</html>
