<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en"
      th:replace="layout :: layout(~{::content})">

<content>

    <h1>Analytics</h1>

    <form method="get" id="stockForm">
        <label>Select Stock:</label>
        <select name="stock" onchange="location.href='/analytics/' + this.value">
            <option value="">-- Select --</option>
            <option th:each="s : ${stocks}"
                    th:value="${s.stockCode}"
                    th:text="${s.stockCode}"
                    th:selected="${stock != null and stock.stockCode == s.stockCode}">
            </option>
        </select>
    </form>

    <div th:if="${stock != null}">

        <h2 th:text="'Analytics for ' + ${stock.stockCode}"></h2>

        <!-- ===== PRICE ===== -->
        <h3>Price</h3>
        <canvas id="priceChart"
                th:attr="data-code=${stock.stockCode}"
                style="width:100%; height:350px;"></canvas>

        <!-- ===== MASS ===== -->
        <h3>Mass</h3>
        <canvas id="massChart"
                th:attr="data-code=${stock.stockCode}"
                style="width:100%; height:300px;"></canvas>

        <!-- ===== FREQUENCY ===== -->
        <h3>Daily Frequency</h3>
        <canvas id="dailyChart"
                th:attr="data-code=${stock.stockCode}"
                style="width:100%; height:250px;"></canvas>

        <h3>Weekly Frequency</h3>
        <canvas id="weeklyChart"
                th:attr="data-code=${stock.stockCode}"
                style="width:100%; height:250px;"></canvas>

        <h3>Monthly Frequency</h3>
        <canvas id="monthlyChart"
                th:attr="data-code=${stock.stockCode}"
                style="width:100%; height:250px;"></canvas>

        <h3>Yearly Frequency</h3>
        <canvas id="yearlyChart"
                th:attr="data-code=${stock.stockCode}"
                style="width:100%; height:250px;"></canvas>

    </div>

    <!-- Chart libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom"></script>

    <!-- Our scripts -->
    <script src="/js/priceChart.js"></script>
    <script src="/js/massChart.js"></script>
    <script src="/js/frequencyCharts.js"></script>

</content>
</html>
